"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxNIS=void 0;const types_1=require("../types"),player_score_1=require("./player-score"),board_1=require("../models/board"),game_state_1=require("../models/game-state");function maxNIS(e,r,t=0){if(game_state_1.isGameOver(e)||r<=0)return evalFunc(e);const o=e.player,s=game_state_1.getNextGameStates(e),a=MAX_SCORE-t;let l=maxNIS(s[0],r-1);for(let e=1,t=s.length;e<t&&!(l[o]>=a);e++){const t=maxNIS(s[e],r-1,l[o]);l[o]<t[o]&&(l=t)}return l}exports.maxNIS=maxNIS;const MAX_SCORE=1,MRoleScore={[types_1.ERole.KNIGHT]:101,[types_1.ERole.BISHOP]:102,[types_1.ERole.ROOK]:103,[types_1.ERole.QUEEN]:105};function evalFunc(e){let r=player_score_1.getZeroScore();for(let t=0,o=e.pawns.length;t<o;t++){const o=e.pawns[t],s=board_1.getFieldColor(o.position),a=o.roles[s];r[o.player]+=MRoleScore[a]}return player_score_1.normalizeScore(r)}